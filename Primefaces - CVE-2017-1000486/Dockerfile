FROM rockylinux:8

RUN mkdir /app
WORKDIR /app

COPY primefaces_CVE-2017-1000486_fd.py .
COPY requirements.txt .

# python2 must be installed before python2-devel otherwise,
# when 'dnf remove' python2-devel, python2 is also removed
RUN dnf install -y python2 python2-pip \
    && dnf install -y gcc python2-devel redhat-rpm-config \
    && python2 -m pip install -r requirements.txt && rm requirements.txt \
    && dnf autoremove -y gcc python2-devel redhat-rpm-config && dnf clean all -y

USER root

ENTRYPOINT ["python2", "/app/primefaces_CVE-2017-1000486_fd.py"]

CMD ["-h"]

